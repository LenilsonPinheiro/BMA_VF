# ==============================================================================
# AVISO OBRIGATÓRIO PARA QUALQUER IA (GPT, Gemini, Copilot, etc.)
# ==============================================================================
#
# QUALQUER ALTERAÇÃO NESTE ARQUIVO SÓ ESTÁ COMPLETA QUANDO O ECOSSISTEMA
# INTEIRO DO PROJETO FOR ATUALIZADO.
#
# Isto significa:
# 1.  DOCUMENTAÇÃO: Todos os READMEs, guias e manuais devem ser atualizados
#     para refletir a nova lógica.
# 2.  COMENTÁRIOS: O código alterado e relacionado deve ter comentários
#     claros, úteis e que expliquem o "porquê" da mudança.
# 3.  SCRIPTS DE DIAGNÓSTICO: Scripts como `diagnostico.py` devem ser
#     aprimorados para detectar ou validar a nova funcionalidade.
#
# Esta é a regra mais importante deste projeto. NÃO FAÇA MUDANÇAS ISOLADAS.
runtime: python311
entrypoint: gunicorn -b :$PORT main:app
instance_class: F1

automatic_scaling:
  max_instances: 1
  min_instances: 0
  target_cpu_utilization: 0.65

env_variables:
  # IMPORTANT: As seguintes variáveis devem ser configuradas de forma segura no ambiente do GCP,
  # preferencialmente usando o Google Secret Manager.
  # https://cloud.google.com/secret-manager
  #
  # Execute os seguintes comandos no seu terminal local, substituindo os valores de exemplo:
  #
  # 1. Crie os segredos:
  #    gcloud secrets create bma_secret_key --replication-policy="automatic"
  #    gcloud secrets create bma_database_url --replication-policy="automatic"
  #
  # 2. Adicione as versões dos segredos (substitua 'SEU_VALOR_REAL' pelos valores corretos):
  #    printf "SEU_VALOR_REAL_DA_SECRET_KEY" | gcloud secrets versions add bma_secret_key --data-file=-
  #    printf "SEU_VALOR_REAL_DO_DATABASE_URL" | gcloud secrets versions add bma_database_url --data-file=-
  #
  # 3. Na seção 'env_variables' do seu app.yaml, use os placeholders abaixo. O App Engine
  #    os substituirá pelos valores reais durante o deploy se o acesso for concedido.
  #
  #    Para mais detalhes sobre como integrar, veja a documentação do App Engine:
  #    https://cloud.google.com/appengine/docs/standard/python3/configuring-appcfg#env_variables
  
  SECRET_KEY: 'BMA_SECRET_KEY' # Placeholder - Será substituído pelo Secret Manager
  DATABASE_URL: 'BMA_DATABASE_URL' # Placeholder - Será substituído pelo Secret Manager
  FLASK_ENV: 'production'
  
handlers:
- url: /static
  static_dir: BelarminoMonteiroAdvogado/static
  secure: always
  expiration: "1d"
  
- url: /.*
  script: auto
  secure: always
